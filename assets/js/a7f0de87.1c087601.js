"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[70982],{1085:(e,t,a)=>{a.d(t,{Z:()=>n});const n={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"}},8913:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(1413),s=a(67294),r=a(1085),i=a(89099),o=function(e,t){return s.createElement(i.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t,icon:r.Z}))};o.displayName="CloseCircleFilled";const l=s.forwardRef(o)},3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>m});var n=a(67294);function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}var l=n.createContext({}),h=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=h(e.components);return n.createElement(l.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,s=e.mdxType,r=e.originalType,l=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),u=h(a),d=s,m=u["".concat(l,".").concat(d)]||u[d]||p[d]||r;return a?n.createElement(m,i(i({ref:t},c),{},{components:a})):n.createElement(m,i({ref:t},c))}));function m(e,t){var a=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var r=a.length,i=new Array(r);i[0]=d;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o[u]="string"==typeof e?e:s,i[1]=o;for(var h=2;h<r;h++)i[h]=a[h];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},53502:(e,t,a)=>{a.d(t,{Z:()=>b});var n=a(67294),s=a(86010);const r="availabilityCard_P5od",i="managedIcon_AxXO",o="platform_wqXv",l="platformAvailable_Y8lN";var h=a(8913),c=a(1413);const u={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};var p=a(89099),d=function(e,t){return n.createElement(p.Z,(0,c.Z)((0,c.Z)({},e),{},{ref:t,icon:u}))};d.displayName="CheckCircleFilled";const m=n.forwardRef(d);const g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M811.4 418.7C765.6 297.9 648.9 212 512.2 212S258.8 297.8 213 418.6C127.3 441.1 64 519.1 64 612c0 110.5 89.5 200 199.9 200h496.2C870.5 812 960 722.5 960 612c0-92.7-63.1-170.7-148.6-193.3zm36.3 281a123.07 123.07 0 01-87.6 36.3H263.9c-33.1 0-64.2-12.9-87.6-36.3A123.3 123.3 0 01140 612c0-28 9.1-54.3 26.2-76.3a125.7 125.7 0 0166.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10c54.3 14.5 92.1 63.8 92.1 120 0 33.1-12.9 64.3-36.3 87.7z"}}]},name:"cloud",theme:"outlined"};var f=function(e,t){return n.createElement(p.Z,(0,c.Z)((0,c.Z)({},e),{},{ref:t,icon:g}))};f.displayName="CloudOutlined";const k=n.forwardRef(f),b=e=>{let{saasOnly:t,ossOnly:a}=e;return n.createElement("div",{className:(0,s.Z)(r,"card")},n.createElement("strong",null,"Feature Availability"),n.createElement("div",null,n.createElement("span",{className:(0,s.Z)(o,!t&&l)},"Self-Hosted DataHub ",t?n.createElement(h.Z,null):n.createElement(m,null))),n.createElement("div",null,n.createElement(k,{className:i}),n.createElement("span",{className:(0,s.Z)(o,!a&&l)},"Managed DataHub ",a?n.createElement(h.Z,null):n.createElement(m,null))))}},68591:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>h,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var n=a(87462),s=(a(67294),a(3905)),r=a(53502);const i={description:"This page provides an overview of working with DataHub Freshness Assertions",title:"Freshness Assertions",slug:"/managed-datahub/observe/freshness-assertions",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/managed-datahub/observe/freshness-assertions.md"},o="Freshness Assertions",l={unversionedId:"docs/managed-datahub/observe/freshness-assertions",id:"version-0.10.5/docs/managed-datahub/observe/freshness-assertions",title:"Freshness Assertions",description:"This page provides an overview of working with DataHub Freshness Assertions",source:"@site/versioned_docs/version-0.10.5/docs/managed-datahub/observe/freshness-assertions.md",sourceDirName:"docs/managed-datahub/observe",slug:"/managed-datahub/observe/freshness-assertions",permalink:"/docs/managed-datahub/observe/freshness-assertions",draft:!1,editUrl:"https://github.com/datahub-project/datahub/blob/master/docs/managed-datahub/observe/freshness-assertions.md",tags:[],version:"0.10.5",frontMatter:{description:"This page provides an overview of working with DataHub Freshness Assertions",title:"Freshness Assertions",slug:"/managed-datahub/observe/freshness-assertions",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/managed-datahub/observe/freshness-assertions.md"},sidebar:"overviewSidebar",previous:{title:"Lineage Impact Analysis",permalink:"/docs/act-on-metadata/impact-analysis"},next:{title:"The Metadata Model",permalink:"/docs/metadata-modeling/metadata-model"}},h={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Support",id:"support",level:2},{value:"What is a Freshness Assertion?",id:"what-is-a-freshness-assertion",level:2},{value:"Anatomy of a Freshness Assertion",id:"anatomy-of-a-freshness-assertion",level:3},{value:"1. Evaluation Schedule",id:"1-evaluation-schedule",level:4},{value:"2. Change Window",id:"2-change-window",level:4},{value:"3. Change Source",id:"3-change-source",level:4},{value:"Creating a Freshness Assertion",id:"creating-a-freshness-assertion",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Steps",id:"steps",level:3},{value:"Stopping a Freshness Assertion",id:"stopping-a-freshness-assertion",level:2},{value:"Smart Assertions \u26a1",id:"smart-assertions-",level:2},{value:"Creating Freshness Assertions via API",id:"creating-freshness-assertions-via-api",level:2},{value:"GraphQL",id:"graphql",level:4},{value:"Examples",id:"examples",level:5},{value:"Tips",id:"tips",level:3}],u={toc:c},p="wrapper";function d(e){let{components:t,...a}=e;return(0,s.kt)(p,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"freshness-assertions"},"Freshness Assertions"),(0,s.kt)(r.Z,{saasOnly:!0,mdxType:"FeatureAvailability"}),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"\u26a0\ufe0f The ",(0,s.kt)("strong",{parentName:"p"},"Freshness Assertions")," feature is currently in private beta, part of the ",(0,s.kt)("strong",{parentName:"p"},"Acryl Observe")," module, and may only be available to a\nlimited set of design partners."),(0,s.kt)("p",{parentName:"blockquote"},"If you are interested in trying it and providing feedback, please reach out to your Acryl Customer Success\nrepresentative.")),(0,s.kt)("h2",{id:"introduction"},"Introduction"),(0,s.kt)("p",null,"Can you remember a time when a Data Warehouse Table that you depended on went days, weeks, or even\nmonths without being updated with fresh data? "),(0,s.kt)("p",null,"Perhaps a bug had been introduced into an upstream Airflow DAG\nor worse, the person in charge of maintaining the Table has departed from your organization entirely.\nThere are many reasons why an important Table on Snowflake, Redshift, or BigQuery may fail to be updated as often as expected. "),(0,s.kt)("p",null,"What if you could reduce the time to detect these incidents, so that the people responsible for the data were made aware of data\nissues ",(0,s.kt)("em",{parentName:"p"},"before")," anyone else? What if you could communicate commitments about the freshness or change frequency\nof a table? With Acryl DataHub Freshness Assertions, you can."),(0,s.kt)("p",null,"Acryl DataHub allows users to define expectations about when a particular Table in the warehouse\nshould change, and then monitor those expectations over time, with the ability to be notified when things go wrong. "),(0,s.kt)("p",null,"In this article, we'll cover the basics of monitoring Freshness Assertions - what they are, how to configure them, and more - so that you and your team can\nstart building trust in your most important data assets. "),(0,s.kt)("p",null,"Let's get started!"),(0,s.kt)("h2",{id:"support"},"Support"),(0,s.kt)("p",null,"Freshness Assertions are currently supported for:"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},"Snowflake"),(0,s.kt)("li",{parentName:"ol"},"Redshift"),(0,s.kt)("li",{parentName:"ol"},"BigQuery")),(0,s.kt)("p",null,"Note that an Ingestion Source ",(0,s.kt)("em",{parentName:"p"},"must")," be configured with the data platform of your choice in Acryl DataHub's ",(0,s.kt)("strong",{parentName:"p"},"Ingestion"),"\ntab."),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"Note that Freshness Assertions are not yet supported if you are connecting to your warehouse\nusing the DataHub CLI or a Remote Ingestion Executor. ")),(0,s.kt)("h2",{id:"what-is-a-freshness-assertion"},"What is a Freshness Assertion?"),(0,s.kt)("p",null,"A ",(0,s.kt)("strong",{parentName:"p"},"Freshness Assertion")," is a configurable Data Quality rule used to determine whether a Table\non the Data Warehouse has been updated within a given period of time. Freshness Assertions are particularly useful when you have frequently-changing\nTables. "),(0,s.kt)("p",null,'For example, imagine that we work for a company with a Snowflake Table that stores user clicks collected from our e-commerce website.\nThis table is updated with new data on a specific cadence: once per hour (In practice, daily or even weekly are also common).\nIn turn, there is a downstream Business Analytics Dashboard in Looker that shows important metrics like\nthe number of people clicking our "Daily Sale" banners, and this dashboard pulls is generated from data stored in our "clicks" table.\nIt is important that our clicks Table continues to be updated each hour because if it stops being updated, it could mean\nthat our downstream metrics dashboard becomes incorrect. And the risk of this situation is obvious: our organization\nmay make bad decisions based on incomplete information. '),(0,s.kt)("p",null,"In such cases, we can use a ",(0,s.kt)("strong",{parentName:"p"},"Freshness Assertion"),' that checks whether the Snowflake "clicks" Table is being updated with\nfresh data each and every hour as expected. If an hour goes by without any changes, we can immediately notify our team, to prevent any\nnegative impacts. '),(0,s.kt)("h3",{id:"anatomy-of-a-freshness-assertion"},"Anatomy of a Freshness Assertion"),(0,s.kt)("p",null,"At the most basic level, ",(0,s.kt)("strong",{parentName:"p"},"Freshness Assertions")," consist of a few important parts:"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},"An ",(0,s.kt)("strong",{parentName:"li"},"Evaluation Schedule")),(0,s.kt)("li",{parentName:"ol"},"A ",(0,s.kt)("strong",{parentName:"li"},"Change Window")),(0,s.kt)("li",{parentName:"ol"},"A ",(0,s.kt)("strong",{parentName:"li"},"Change Source"))),(0,s.kt)("p",null,"In this section, we'll give an overview of each."),(0,s.kt)("h4",{id:"1-evaluation-schedule"},"1. Evaluation Schedule"),(0,s.kt)("p",null,"The ",(0,s.kt)("strong",{parentName:"p"},"Evaluation Schedule"),": This defines how often to check a given warehouse Table for new updates. This should usually\nbe configured to match the expected change frequency of the Table, although is can also be more frequently.\nIf the Table changes daily, it should be daily. If it changes hourly, it should be hourly. You can also specify specific days of the week, hours in the day, or even\nminutes in an hour. "),(0,s.kt)("h4",{id:"2-change-window"},"2. Change Window"),(0,s.kt)("p",null,"The ",(0,s.kt)("strong",{parentName:"p"},"Change Window"),": This defines the window of time that is used when determining whether a change has been made to a Table.\nWe can either check for change to the Table"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},(0,s.kt)("em",{parentName:"p"},"Since the freshness check was last evaluated"),". For example, if the evaluation schedule is set to run every day at\n8am PST, we can check whether a change was made between the previous day at 8am and the following day at 8am.")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},(0,s.kt)("em",{parentName:"p"},"Within a specific amount of time of the freshness check being evaluated")," (A fixed interval). For example, if the evaluation schedule is set to run\nevery day at 8am PST, we can check whether a change was made in the ",(0,s.kt)("em",{parentName:"p"},"8 hours before")," the check is evaluated, which would mean\nin the time between midnight (12:00am) and 8:00am PST.\n"))),(0,s.kt)("h4",{id:"3-change-source"},"3. Change Source"),(0,s.kt)("p",null,"The ",(0,s.kt)("strong",{parentName:"p"},"Change Source"),": This is the mechanism that Acryl DataHub should use to determine whether the Table has changed. The supported\nChange Source types vary by the platform, but generally fall into these categories:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},(0,s.kt)("strong",{parentName:"p"},"Audit Log")," (Default): A metadata API or Table that is exposed by the Data Warehouse which contains captures information about the\noperations that have been performed to each Table. It is usually efficient to check, but some useful operations are not\nfully supported across all major Warehouse platforms.")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},(0,s.kt)("strong",{parentName:"p"},"Information Schema"),": A system Table that is exposed by the Data Warehouse which contains live information about the Databases\nand Tables stored inside the Data Warehouse. It is usually efficient to check, but lacks detailed information about the ",(0,s.kt)("em",{parentName:"p"},"type"),"\nof change that was last made to a specific table (e.g. the operation itself - INSERT, UPDATE, DELETE, number of impacted rows, etc)\n")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},(0,s.kt)("strong",{parentName:"p"},"Last Modified Column"),": A Date or Timestamp column that represents the last time that a specific ",(0,s.kt)("em",{parentName:"p"},"row")," was touched or updated.\nAdding a Last Modified Column to each warehouse Table is a pattern is often used for existing use cases around change management.\nIf this change source is used, a query will be issued to the Table to search for rows that have been modified within a specific\nwindow of time (based on the Change Window)")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},(0,s.kt)("strong",{parentName:"p"},"High Watermark Column"),': A column that contains a constantly-incrementing value - a date, a time, or another always-increasing number.\nIf this change source is used, a query will be issued to the Table to look for rows with a new "high watermark", e.g. a value that\nis higher than the previously observed value, in order to determine whether the Table has been changed within a given period of time.\nNote that this approach is only supported if the Change Window does not use a fixed interval.'),(0,s.kt)("p",{parentName:"li"},"Using the final 2 approaches - column value queries - to determine whether a Table has changed useful because it can be customized to determine whether\nspecific types of important changes have been made to a given Table.\nBecause it does not involve system warehouse tables, it is also easily portable across Data Warehouse and Data Lake providers. "))),(0,s.kt)("p",null,"Freshness Assertions also have an off switch: they can be started or stopped at any time with the click of button."),(0,s.kt)("h2",{id:"creating-a-freshness-assertion"},"Creating a Freshness Assertion"),(0,s.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("strong",{parentName:"li"},"Permissions"),": To create or delete Freshness Assertions for a specific entity on DataHub, you'll need to be granted the\n",(0,s.kt)("inlineCode",{parentName:"li"},"Edit Assertions")," and ",(0,s.kt)("inlineCode",{parentName:"li"},"Edit Monitors")," privileges for the entity. This is granted to Entity owners by default.\n"),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("strong",{parentName:"li"},"Data Platform Connection"),": In order to create a Freshness Assertion, you'll need to have an ",(0,s.kt)("strong",{parentName:"li"},"Ingestion Source")," configured to your\nData Platform: Snowflake, BigQuery, or Redshift under the ",(0,s.kt)("strong",{parentName:"li"},"Integrations")," tab. ")),(0,s.kt)("p",null,"Once these are in place, you're ready to create your Freshness Assertions!"),(0,s.kt)("h3",{id:"steps"},"Steps"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},"Navigate to the Table that to monitor for freshness"),(0,s.kt)("li",{parentName:"ol"},"Click the ",(0,s.kt)("strong",{parentName:"li"},"Validations")," tab")),(0,s.kt)("p",{align:"center"},(0,s.kt)("img",{width:"90%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/observe/freshness/profile-validation-tab.png"})),(0,s.kt)("ol",{start:3},(0,s.kt)("li",{parentName:"ol"},"Click ",(0,s.kt)("strong",{parentName:"li"},"+ Create Assertion"))),(0,s.kt)("p",{align:"center"},(0,s.kt)("img",{width:"90%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/observe/freshness/assertion-builder-choose-type.png"})),(0,s.kt)("ol",{start:4},(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"Choose ",(0,s.kt)("strong",{parentName:"p"},"Freshness"))),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"Configure the evaluation ",(0,s.kt)("strong",{parentName:"p"},"schedule"),". This is the frequency that the table will be checked for changes. This represents you\nexpectation about the frequency at which the table should be updated.\n")),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"Configure the evaluation ",(0,s.kt)("strong",{parentName:"p"},"period"),". This defines the period of time that will be considered when looking for changes to the table. Choose between ",(0,s.kt)("em",{parentName:"p"},"Since the previous check")," to check whether the table has changed since the past evaluation,\nor ",(0,s.kt)("em",{parentName:"p"},"In the past X hours")," to configure a fixed interval that is used when checking the table. "))),(0,s.kt)("p",null,(0,s.kt)("em",{parentName:"p"},"Check whether the table has changed between subsequent evaluations of the check")),(0,s.kt)("p",{align:"center"},(0,s.kt)("img",{width:"90%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/observe/freshness/assertion-builder-freshness-since-last.png"})),(0,s.kt)("p",null,(0,s.kt)("em",{parentName:"p"},"Check whether the table has changed in a specific window of time")),(0,s.kt)("p",{align:"center"},(0,s.kt)("img",{width:"90%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/observe/freshness/assertion-builder-freshness-fixed-interval.png"})),(0,s.kt)("ol",{start:7},(0,s.kt)("li",{parentName:"ol"},"(Optional) Click ",(0,s.kt)("strong",{parentName:"li"},"Advanced")," to customize the evaluation ",(0,s.kt)("strong",{parentName:"li"},"source"),". This is the mechanism that will be used to evaluate\nthe check. Each Data Platform supports different options including Audit Log, Information Schema, Last Modified Column, and High Watermark Column.\n")),(0,s.kt)("p",{align:"center"},(0,s.kt)("img",{width:"45%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/observe/freshness/assertion-builder-freshness-source-type.png"})),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"Audit Log"),": Check the Data Platform operational audit log to determine whether the table changed within the evaluation period."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"Information Schema"),": Check the Data Platform system metadata tables to determine whether the table changed within the evaluation period. "),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"Last Modified Column"),': Check for the presence of rows using a "Last Modified Time" column, which should reflect the time at which a given row was last changed in the table, to\ndetermine whether the table changed within the evaluation period.'),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"High Watermark Column"),': Monitor changes to a continuously-increasing "high watermark" column value to determine whether a table\nhas been changed. This option is particularly useful for tables that grow consistently with time, for example fact or event (e.g. click-strea) tables. It is not available\nwhen using a fixed lookback period. ')),(0,s.kt)("ol",{start:8},(0,s.kt)("li",{parentName:"ol"},"Click ",(0,s.kt)("strong",{parentName:"li"},"Next")),(0,s.kt)("li",{parentName:"ol"},"Configure actions that should be taken when the Freshness Assertion passes or fails")),(0,s.kt)("p",{align:"left"},(0,s.kt)("img",{width:"55%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/observe/freshness/assertion-builder-actions.png"})),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"Raise incident"),": Automatically raise a new DataHub ",(0,s.kt)("inlineCode",{parentName:"li"},"Freshness")," Incident for the Table whenever the Freshness Assertion is failing. This\nmay indicate that the Table is unfit for consumption. Configure Slack Notifications under ",(0,s.kt)("strong",{parentName:"li"},"Settings")," to be notified when\nan incident is created due to an Assertion failure. "),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"Resolve incident"),": Automatically resolved any incidents that were raised due to failures in this Freshness Assertion. Note that\nany other incidents will not be impacted. ")),(0,s.kt)("ol",{start:10},(0,s.kt)("li",{parentName:"ol"},"Click ",(0,s.kt)("strong",{parentName:"li"},"Save"),". ")),(0,s.kt)("p",null,"And that's it! DataHub will now begin to monitor your Freshness Assertion for the table. "),(0,s.kt)("p",null,"To view the time of the next Freshness Assertion evaluation, simply click ",(0,s.kt)("strong",{parentName:"p"},"Freshness")," and then click on your\nnew Assertion:"),(0,s.kt)("p",{align:"center"},(0,s.kt)("img",{width:"40%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/observe/freshness/assertion-next-evaluation-time.png"})),(0,s.kt)("p",null,"Once your assertion has run, you will begin to see Success or Failure status for the Table"),(0,s.kt)("p",{align:"center"},(0,s.kt)("img",{width:"90%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/observe/freshness/failing-assertions-section.png"})),(0,s.kt)("h2",{id:"stopping-a-freshness-assertion"},"Stopping a Freshness Assertion"),(0,s.kt)("p",null,"In order to temporarily stop the evaluation of a Freshness Assertion:"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},"Navigate to the ",(0,s.kt)("strong",{parentName:"li"},"Validations")," tab of the Table with the assertion"),(0,s.kt)("li",{parentName:"ol"},"Click ",(0,s.kt)("strong",{parentName:"li"},"Freshness")," to open the Freshness Assertions list"),(0,s.kt)("li",{parentName:"ol"},"Click the three-dot menu on the right side of the assertion you want to disable"),(0,s.kt)("li",{parentName:"ol"},"Click ",(0,s.kt)("strong",{parentName:"li"},"Stop"))),(0,s.kt)("p",{align:"left"},(0,s.kt)("img",{width:"25%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/observe/freshness/manage-assertion-menu.png"})),(0,s.kt)("p",null,"To resume the Freshness Assertion, simply click ",(0,s.kt)("strong",{parentName:"p"},"Turn On"),". "),(0,s.kt)("p",{align:"center"},(0,s.kt)("img",{width:"90%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/observe/freshness/stopped-assertion.png"})),(0,s.kt)("h2",{id:"smart-assertions-"},"Smart Assertions \u26a1"),(0,s.kt)("p",null,"As part of the ",(0,s.kt)("strong",{parentName:"p"},"Acryl Observe")," module, Acryl DataHub also provides ",(0,s.kt)("strong",{parentName:"p"},"Smart Assertions")," out of the box. These are\ndynamic, AI-powered Freshness Assertions that you can use to monitor the freshness of important warehouse Tables, without\nrequiring any manual setup. "),(0,s.kt)("p",null,"If Acryl DataHub is able to detect a pattern in the change frequency of a Snowflake, Redshift, or BigQuery Table, you'll find\na recommended Smart Assertion under the ",(0,s.kt)("inlineCode",{parentName:"p"},"Validations")," tab on the Table profile page:"),(0,s.kt)("p",{align:"center"},(0,s.kt)("img",{width:"90%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/observe/freshness/smart-assertion.png"})),(0,s.kt)("p",null,"In order to enable it, simply click ",(0,s.kt)("strong",{parentName:"p"},"Turn On"),". From this point forward, the Smart Assertion will check for changes on a cadence\nbased on the Table history, by default using the ",(0,s.kt)("strong",{parentName:"p"},"Audit Log"),". "),(0,s.kt)("p",null,'Don\'t need it anymore? Smart Assertions can just as easily be turned off by clicking the three-dot "more" button and then ',(0,s.kt)("strong",{parentName:"p"},"Stop"),". "),(0,s.kt)("h2",{id:"creating-freshness-assertions-via-api"},"Creating Freshness Assertions via API"),(0,s.kt)("p",null,'Under the hood, Acryl DataHub implements Freshness Assertion Monitoring using two "entity" concepts:'),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"Assertion"),': The specific expectation for freshness, e.g. "The table was changed int the past 7 hours"\nor "The table is changed on a schedule of every day by 8am". This is the "what". '),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"Monitor"),': The process responsible for evaluating the Assertion on a given evaluation schedule and using specific\nmechanisms. This is the "how". ')),(0,s.kt)("p",null,"Note that to create or delete Assertions and Monitors for a specific entity on DataHub, you'll need the\n",(0,s.kt)("inlineCode",{parentName:"p"},"Edit Assertions")," and ",(0,s.kt)("inlineCode",{parentName:"p"},"Edit Monitors")," privileges for it. "),(0,s.kt)("h4",{id:"graphql"},"GraphQL"),(0,s.kt)("p",null,"In order to create a Freshness Assertion that is being monitored on a specific ",(0,s.kt)("strong",{parentName:"p"},"Evaluation Schedule"),", you'll need to use 2\nGraphQL mutation queries to  create a Freshness Assertion entity and create an Assertion Monitor entity responsible for evaluating it."),(0,s.kt)("p",null,"Start by creating the Freshness Assertion entity using the ",(0,s.kt)("inlineCode",{parentName:"p"},"createFreshnessAssertion")," query and hang on to the 'urn' field of the Assertion entit y\nyou get back. Then continue by creating a Monitor entity using the ",(0,s.kt)("inlineCode",{parentName:"p"},"createAssertionMonitor"),"."),(0,s.kt)("h5",{id:"examples"},"Examples"),(0,s.kt)("p",null,"To create a Freshness Assertion Entity that checks whether a table has been updated in the past 8 hours: "),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'mutation createFreshnessAssertion {\n  createFreshnessAssertion(\n    input: {\n      entityUrn: "<urn of the table to be monitored>"\n      type: DATASET_CHANGE\n      schedule: {\n        type: FIXED_INTERVAL\n        fixedInterval: { unit: HOUR, multiple: 8 }\n      }\n    }\n  ) {\n    urn\n  }\n}\n')),(0,s.kt)("p",null,"This defines the user's expectation: that the table should have changed in the past 8 hours whenever the assertion is evaluated. "),(0,s.kt)("p",null,"To create an Assertion Monitor Entity that evaluates the assertion every 8 hours using the Audit Log:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'mutation createAssertionMonitor {\n  createAssertionMonitor(\n    input: {\n      entityUrn: "<urn of entity being monitored>",\n      assertionUrn: "<urn of assertion created in first query>",\n      schedule: {\n        cron: "0 */8 * * *",\n        timezone: "America/Los_Angeles"\n      },\n      parameters: {\n        type: DATASET_FRESHNESS,\n        datasetFreshnessParameters: {\n          sourceType: AUDIT_LOG,\n        }\n      }\n    }\n  ) {\n    urn\n  }\n}\n')),(0,s.kt)("p",null,"This entity defines ",(0,s.kt)("em",{parentName:"p"},"when")," to run the check (Using CRON format - every 8th hour) and ",(0,s.kt)("em",{parentName:"p"},"how")," to run the check (using the Audit Log). "),(0,s.kt)("p",null,"After creating the monitor, the new assertion will start to be evaluated every 8 hours in your selected timezone. "),(0,s.kt)("p",null,"You can delete assertions along with their monitors using GraphQL mutations: ",(0,s.kt)("inlineCode",{parentName:"p"},"deleteAssertion")," and ",(0,s.kt)("inlineCode",{parentName:"p"},"deleteMonitor"),"."),(0,s.kt)("h3",{id:"tips"},"Tips"),(0,s.kt)("admonition",{type:"info"},(0,s.kt)("p",{parentName:"admonition"},(0,s.kt)("strong",{parentName:"p"},"Authorization")),(0,s.kt)("p",{parentName:"admonition"},"Remember to always provide a DataHub Personal Access Token when calling the GraphQL API. To do so, just add the 'Authorization' header as follows:"),(0,s.kt)("pre",{parentName:"admonition"},(0,s.kt)("code",{parentName:"pre"},"Authorization: Bearer <personal-access-token>\n")),(0,s.kt)("p",{parentName:"admonition"},(0,s.kt)("strong",{parentName:"p"},"Exploring GraphQL API")),(0,s.kt)("p",{parentName:"admonition"},"Also, remember that you can play with an interactive version of the Acryl GraphQL API at ",(0,s.kt)("inlineCode",{parentName:"p"},"https://your-account-id.acryl.io/api/graphiql"))))}d.isMDXComponent=!0}}]);