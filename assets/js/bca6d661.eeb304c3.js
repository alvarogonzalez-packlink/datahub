"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[84342],{1085:(e,t,n)=>{n.d(t,{Z:()=>a});const a={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"}},8913:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(1413),i=n(67294),o=n(1085),r=n(89099),s=function(e,t){return i.createElement(r.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t,icon:o.Z}))};s.displayName="CloseCircleFilled";const l=i.forwardRef(s)},3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),u=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},g=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=u(n),g=i,h=p["".concat(l,".").concat(g)]||p[g]||d[g]||o;return n?a.createElement(h,r(r({ref:t},c),{},{components:n})):a.createElement(h,r({ref:t},c))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=g;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:i,r[1]=s;for(var u=2;u<o;u++)r[u]=n[u];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}g.displayName="MDXCreateElement"},18679:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(67294),i=n(86010);const o={tabItem:"tabItem_Ymn6"};function r(e){let{children:t,hidden:n,className:r}=e;return a.createElement("div",{role:"tabpanel",className:(0,i.Z)(o.tabItem,r),hidden:n},t)}},73992:(e,t,n)=>{n.d(t,{Z:()=>w});var a=n(87462),i=n(67294),o=n(86010),r=n(72957),s=n(16550),l=n(75238),u=n(33609),c=n(92560);function p(e){return function(e){return i.Children.map(e,(e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:i}}=e;return{value:t,label:n,attributes:a,default:i}}))}function d(e){const{values:t,children:n}=e;return(0,i.useMemo)((()=>{const e=t??p(n);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function g(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function h(e){let{queryString:t=!1,groupId:n}=e;const a=(0,s.k6)(),o=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,l._X)(o),(0,i.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(a.location.search);t.set(o,e),a.replace({...a.location,search:t.toString()})}),[o,a])]}function m(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,o=d(e),[r,s]=(0,i.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!g({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:o}))),[l,u]=h({queryString:n,groupId:a}),[p,m]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,o]=(0,c.Nk)(n);return[a,(0,i.useCallback)((e=>{n&&o.set(e)}),[n,o])]}({groupId:a}),f=(()=>{const e=l??p;return g({value:e,tabValues:o})?e:null})();(0,i.useLayoutEffect)((()=>{f&&s(f)}),[f]);return{selectedValue:r,selectValue:(0,i.useCallback)((e=>{if(!g({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);s(e),u(e),m(e)}),[u,m,o]),tabValues:o}}var f=n(51048);const k={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function b(e){let{className:t,block:n,selectedValue:s,selectValue:l,tabValues:u}=e;const c=[],{blockElementScrollPositionUntilNextRender:p}=(0,r.o5)(),d=e=>{const t=e.currentTarget,n=c.indexOf(t),a=u[n].value;a!==s&&(p(t),l(a))},g=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const n=c.indexOf(e.currentTarget)+1;t=c[n]??c[0];break}case"ArrowLeft":{const n=c.indexOf(e.currentTarget)-1;t=c[n]??c[c.length-1];break}}t?.focus()};return i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":n},t)},u.map((e=>{let{value:t,label:n,attributes:r}=e;return i.createElement("li",(0,a.Z)({role:"tab",tabIndex:s===t?0:-1,"aria-selected":s===t,key:t,ref:e=>c.push(e),onKeyDown:g,onClick:d},r,{className:(0,o.Z)("tabs__item",k.tabItem,r?.className,{"tabs__item--active":s===t})}),n??t)})))}function y(e){let{lazy:t,children:n,selectedValue:a}=e;const o=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=o.find((e=>e.props.value===a));return e?(0,i.cloneElement)(e,{className:"margin-top--md"}):null}return i.createElement("div",{className:"margin-top--md"},o.map(((e,t)=>(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==a}))))}function v(e){const t=m(e);return i.createElement("div",{className:(0,o.Z)("tabs-container",k.tabList)},i.createElement(b,(0,a.Z)({},e,t)),i.createElement(y,(0,a.Z)({},e,t)))}function w(e){const t=(0,f.Z)();return i.createElement(v,(0,a.Z)({key:String(t)},e))}},53502:(e,t,n)=>{n.d(t,{Z:()=>b});var a=n(67294),i=n(86010);const o="availabilityCard_P5od",r="managedIcon_AxXO",s="platform_wqXv",l="platformAvailable_Y8lN";var u=n(8913),c=n(1413);const p={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};var d=n(89099),g=function(e,t){return a.createElement(d.Z,(0,c.Z)((0,c.Z)({},e),{},{ref:t,icon:p}))};g.displayName="CheckCircleFilled";const h=a.forwardRef(g);const m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M811.4 418.7C765.6 297.9 648.9 212 512.2 212S258.8 297.8 213 418.6C127.3 441.1 64 519.1 64 612c0 110.5 89.5 200 199.9 200h496.2C870.5 812 960 722.5 960 612c0-92.7-63.1-170.7-148.6-193.3zm36.3 281a123.07 123.07 0 01-87.6 36.3H263.9c-33.1 0-64.2-12.9-87.6-36.3A123.3 123.3 0 01140 612c0-28 9.1-54.3 26.2-76.3a125.7 125.7 0 0166.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10c54.3 14.5 92.1 63.8 92.1 120 0 33.1-12.9 64.3-36.3 87.7z"}}]},name:"cloud",theme:"outlined"};var f=function(e,t){return a.createElement(d.Z,(0,c.Z)((0,c.Z)({},e),{},{ref:t,icon:m}))};f.displayName="CloudOutlined";const k=a.forwardRef(f),b=e=>{let{saasOnly:t,ossOnly:n}=e;return a.createElement("div",{className:(0,i.Z)(o,"card")},a.createElement("strong",null,"Feature Availability"),a.createElement("div",null,a.createElement("span",{className:(0,i.Z)(s,!t&&l)},"Self-Hosted DataHub ",t?a.createElement(u.Z,null):a.createElement(h,null))),a.createElement("div",null,a.createElement(k,{className:r}),a.createElement("span",{className:(0,i.Z)(s,!n&&l)},"Managed DataHub ",n?a.createElement(u.Z,null):a.createElement(h,null))))}},32008:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>u,default:()=>m,frontMatter:()=>l,metadata:()=>c,toc:()=>d});var a=n(87462),i=(n(67294),n(3905)),o=n(53502),r=n(73992),s=n(18679);const l={title:"Ingestion",slug:"/ui-ingestion",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/ui-ingestion.md"},u="Ingestion",c={unversionedId:"docs/ui-ingestion",id:"version-0.13.0/docs/ui-ingestion",title:"Ingestion",description:"Introduction",source:"@site/versioned_docs/version-0.13.0/docs/ui-ingestion.md",sourceDirName:"docs",slug:"/ui-ingestion",permalink:"/docs/ui-ingestion",draft:!1,editUrl:"https://github.com/datahub-project/datahub/blob/master/docs/ui-ingestion.md",tags:[],version:"0.13.0",frontMatter:{title:"Ingestion",slug:"/ui-ingestion",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/ui-ingestion.md"},sidebar:"overviewSidebar",previous:{title:"Features",permalink:"/docs/category/features"},next:{title:"Search",permalink:"/docs/how/search"}},p={},d=[{value:"Introduction",id:"introduction",level:2},{value:"Running Metadata Ingestion",id:"running-metadata-ingestion",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Creating an Ingestion Source",id:"creating-an-ingestion-source",level:3},{value:"Step 1: Select a Platform Template",id:"step-1-select-a-platform-template",level:4},{value:"Step 2: Configure a Recipe",id:"step-2-configure-a-recipe",level:4},{value:"Creating a Secret",id:"creating-a-secret",level:5},{value:"Referencing a Secret",id:"referencing-a-secret",level:5},{value:"Step 3: Schedule Execution",id:"step-3-schedule-execution",level:4},{value:"Step 4: Finishing Up",id:"step-4-finishing-up",level:4},{value:"Advanced ingestion configs:",id:"advanced-ingestion-configs",level:5},{value:"Running an Ingestion Source",id:"running-an-ingestion-source",level:3},{value:"Cancelling an Ingestion Run",id:"cancelling-an-ingestion-run",level:3},{value:"Debugging a Failed Ingestion Run",id:"debugging-a-failed-ingestion-run",level:3},{value:"FAQ",id:"faq",level:2},{value:"I tried to ingest metadata after running &#39;datahub docker quickstart&#39;, but ingestion is failing with &#39;Failed to Connect&#39; errors. What do I do?",id:"i-tried-to-ingest-metadata-after-running-datahub-docker-quickstart-but-ingestion-is-failing-with-failed-to-connect-errors-what-do-i-do",level:3},{value:"I see &#39;N/A&#39; when I try to run ingestion. What do I do?",id:"i-see-na-when-i-try-to-run-ingestion-what-do-i-do",level:3},{value:"When should I NOT use UI Ingestion?",id:"when-should-i-not-use-ui-ingestion",level:3},{value:"How do I attach policies to the actions pod to give it permissions to pull metadata from various sources?",id:"how-do-i-attach-policies-to-the-actions-pod-to-give-it-permissions-to-pull-metadata-from-various-sources",level:3},{value:"Demo",id:"demo",level:2},{value:"Feedback / Questions / Concerns",id:"feedback--questions--concerns",level:2}],g={toc:d},h="wrapper";function m(e){let{components:t,...n}=e;return(0,i.kt)(h,(0,a.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"ingestion"},"Ingestion"),(0,i.kt)(o.Z,{mdxType:"FeatureAvailability"}),(0,i.kt)("h2",{id:"introduction"},"Introduction"),(0,i.kt)("p",null,"Starting in version ",(0,i.kt)("inlineCode",{parentName:"p"},"0.8.25"),", DataHub supports creating, configuring, scheduling, & executing batch metadata ingestion using the DataHub user interface. This makes\ngetting metadata into DataHub easier by minimizing the overhead required to operate custom integration pipelines. "),(0,i.kt)("p",null,"This document will describe the steps required to configure, schedule, and execute metadata ingestion inside the UI. "),(0,i.kt)("h2",{id:"running-metadata-ingestion"},"Running Metadata Ingestion"),(0,i.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,i.kt)("p",null,"To view & manage UI-based metadata ingestion, you must have the ",(0,i.kt)("inlineCode",{parentName:"p"},"Manage Metadata Ingestion")," & ",(0,i.kt)("inlineCode",{parentName:"p"},"Manage Secrets"),"\nprivileges assigned to your account. These can be granted by a ",(0,i.kt)("a",{parentName:"p",href:"/docs/authorization/policies"},"Platform Policy"),"."),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{width:"70%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/ingestion-privileges.png"})),(0,i.kt)("p",null,"Once you have these privileges, you can begin to manage ingestion by navigating to the 'Ingestion' tab in DataHub. "),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{width:"70%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/ingestion-tab.png"})),(0,i.kt)("p",null,"On this page, you'll see a list of active ",(0,i.kt)("strong",{parentName:"p"},"Ingestion Sources"),". An Ingestion Sources is a unique source of metadata ingested\ninto DataHub from an external source like Snowflake, Redshift, or BigQuery."),(0,i.kt)("p",null,"If you're just getting started, you won't have any sources. In the following sections, we'll describe how to create\nyour first ",(0,i.kt)("strong",{parentName:"p"},"Ingestion Source"),". "),(0,i.kt)("h3",{id:"creating-an-ingestion-source"},"Creating an Ingestion Source"),(0,i.kt)(r.Z,{mdxType:"Tabs"},(0,i.kt)(s.Z,{value:"ui",label:"UI",default:!0,mdxType:"TabItem"},(0,i.kt)("p",null,"Before ingesting any metadata, you need to create a new Ingestion Source. Start by clicking ",(0,i.kt)("strong",{parentName:"p"},"+ Create new source"),"."),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{width:"70%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/create-new-ingestion-source-button.png"})),(0,i.kt)("h4",{id:"step-1-select-a-platform-template"},"Step 1: Select a Platform Template"),(0,i.kt)("p",null,"In the first step, select a ",(0,i.kt)("strong",{parentName:"p"},"Recipe Template")," corresponding to the source type that you'd like to extract metadata from. Choose among\na variety of natively supported integrations, from Snowflake to Postgres to Kafka.\nSelect ",(0,i.kt)("inlineCode",{parentName:"p"},"Custom")," to construct an ingestion recipe from scratch. "),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{width:"70%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/select-platform-template.png"})),(0,i.kt)("p",null,"Next, you'll configure an ingestion ",(0,i.kt)("strong",{parentName:"p"},"Recipe"),", which defines ",(0,i.kt)("em",{parentName:"p"},"how")," and ",(0,i.kt)("em",{parentName:"p"},"what")," to extract from the source system."),(0,i.kt)("h4",{id:"step-2-configure-a-recipe"},"Step 2: Configure a Recipe"),(0,i.kt)("p",null,"Next, you'll define an ingestion ",(0,i.kt)("strong",{parentName:"p"},"Recipe")," in ",(0,i.kt)("a",{parentName:"p",href:"https://yaml.org/"},"YAML"),". A ",(0,i.kt)("a",{parentName:"p",href:"/docs/metadata-ingestion/#recipes"},"Recipe")," is a set of configurations which is\nused by DataHub to extract metadata from a 3rd party system. It most often consists of the following parts:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"A source ",(0,i.kt)("strong",{parentName:"li"},"type"),": The type of system you'd like to extract metadata from (e.g. snowflake, mysql, postgres). If you've chosen a native template, this will already be populated for you.\nTo view a full list of currently supported ",(0,i.kt)("strong",{parentName:"li"},"types"),", check out ",(0,i.kt)("a",{parentName:"li",href:"/docs/metadata-ingestion/#installing-plugins"},"this list"),".")),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"A source ",(0,i.kt)("strong",{parentName:"li"},"config"),": A set of configurations specific to the source ",(0,i.kt)("strong",{parentName:"li"},"type"),". Most sources support the following types of configuration values: ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Coordinates"),": The location of the system you want to extract metadata from"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Credentials"),": Authorized credentials for accessing the system you want to extract metadata from"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Customizations"),": Customizations regarding the metadata that will be extracted, e.g. which databases or tables to scan in a relational DB")))),(0,i.kt)("ol",{start:3},(0,i.kt)("li",{parentName:"ol"},"A sink ",(0,i.kt)("strong",{parentName:"li"},"type"),": A type of sink to route the metadata extracted from the source type. The officially supported DataHub sink\ntypes are ",(0,i.kt)("inlineCode",{parentName:"li"},"datahub-rest")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"datahub-kafka"),". ")),(0,i.kt)("ol",{start:4},(0,i.kt)("li",{parentName:"ol"},"A sink ",(0,i.kt)("strong",{parentName:"li"},"config"),": Configuration required to send metadata to the provided sink type. For example, DataHub coordinates and credentials.")),(0,i.kt)("p",null,"A sample of a full recipe configured to ingest metadata from MySQL can be found in the image below."),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{width:"70%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/example-mysql-recipe.png"})),(0,i.kt)("p",null,"Detailed configuration examples & documentation for each source type can be found on the ",(0,i.kt)("a",{parentName:"p",href:"/docs/metadata-ingestion/"},"DataHub Docs")," website."),(0,i.kt)("h5",{id:"creating-a-secret"},"Creating a Secret"),(0,i.kt)("p",null,"For production use cases, sensitive configuration values, such as database usernames and passwords,\nshould be hidden from plain view within your ingestion recipe. To accomplish this, you can create & embed ",(0,i.kt)("strong",{parentName:"p"},"Secrets"),". Secrets are named values\nthat are encrypted and stored within DataHub's storage layer."),(0,i.kt)("p",null,"To create a secret, first navigate to the 'Secrets' tab. Then click ",(0,i.kt)("inlineCode",{parentName:"p"},"+ Create new secret"),". "),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{width:"70%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/create-secret.png"})),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Creating a Secret to store the username for a MySQL database")),(0,i.kt)("p",null,"Inside the form, provide a unique name for the secret along with the value to be encrypted, and an optional description. Click ",(0,i.kt)("strong",{parentName:"p"},"Create")," when you are done.\nThis will create a Secret which can be referenced inside your ingestion recipe using its name. "),(0,i.kt)("h5",{id:"referencing-a-secret"},"Referencing a Secret"),(0,i.kt)("p",null,"Once a Secret has been created, it can be referenced from within your ",(0,i.kt)("strong",{parentName:"p"},"Recipe")," using variable substitution. For example,\nto substitute secrets for a MySQL username and password into a Recipe, your Recipe would be defined as follows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"source:\n    type: mysql\n    config:\n        host_port: 'localhost:3306'\n        database: my_db\n        username: ${MYSQL_USERNAME}\n        password: ${MYSQL_PASSWORD}\n        include_tables: true\n        include_views: true\n        profiling:\n            enabled: true\nsink:\n    type: datahub-rest\n    config:\n        server: 'http://datahub-gms:8080'\n")),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Referencing DataHub Secrets from a Recipe definition")),(0,i.kt)("p",null,"When the Ingestion Source with this Recipe executes, DataHub will attempt to 'resolve' Secrets found within the YAML. If a secret can be resolved, the reference is substituted for its decrypted value prior to execution.\nSecret values are not persisted to disk beyond execution time, and are never transmitted outside DataHub."),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("strong",{parentName:"p"},"Attention"),": Any DataHub users who have been granted the ",(0,i.kt)("inlineCode",{parentName:"p"},"Manage Secrets")," ",(0,i.kt)("a",{parentName:"p",href:"/docs/authorization/policies"},"Platform Privilege")," will be able to retrieve plaintext secret values using the GraphQL API. ")),(0,i.kt)("h4",{id:"step-3-schedule-execution"},"Step 3: Schedule Execution"),(0,i.kt)("p",null,"Next, you can optionally configure a schedule on which to execute your new Ingestion Source. This enables to schedule metadata extraction on a monthly, weekly, daily, or hourly cadence depending on the needs of your organization.\nSchedules are defined using CRON format. "),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{width:"70%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/schedule-ingestion.png"})),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"An Ingestion Source that is executed at 9:15am every day, Los Angeles time")),(0,i.kt)("p",null,"To learn more about the CRON scheduling format, check out the ",(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Cron"},"Wikipedia")," overview."),(0,i.kt)("p",null,"If you plan to execute ingestion on an ad-hoc basis, you can click ",(0,i.kt)("strong",{parentName:"p"},"Skip")," to skip the scheduling step entirely. Don't worry -\nyou can always come back and change this. "),(0,i.kt)("h4",{id:"step-4-finishing-up"},"Step 4: Finishing Up"),(0,i.kt)("p",null,"Finally, give your Ingestion Source a name. "),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{width:"70%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/name-ingestion-source.png"})),(0,i.kt)("p",null,"Once you're happy with your configurations, click 'Done' to save your changes."),(0,i.kt)("h5",{id:"advanced-ingestion-configs"},"Advanced ingestion configs:"),(0,i.kt)("p",null,"DataHub's Managed Ingestion UI comes pre-configured to use the latest version of the DataHub CLI (",(0,i.kt)("a",{parentName:"p",href:"https://pypi.org/project/acryl-datahub/"},"acryl-datahub"),") that is compatible\nwith the server. However, you can override the default package version using the 'Advanced' source configurations."),(0,i.kt)("p",null,"To do so, simply click 'Advanced', then change the 'CLI Version' text box to contain the exact version\nof the DataHub CLI you'd like to use."),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{width:"70%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/custom-ingestion-cli-version.png"})),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Pinning the CLI version to version ",(0,i.kt)("inlineCode",{parentName:"em"},"0.8.23.2"))),(0,i.kt)("p",null,"Other advanced options include specifying ",(0,i.kt)("strong",{parentName:"p"},"environment variables"),", ",(0,i.kt)("strong",{parentName:"p"},"DataHub plugins")," or ",(0,i.kt)("strong",{parentName:"p"},"python packages at runtime"),". "),(0,i.kt)("p",null,"Once you're happy with your changes, simply click 'Done' to save. ")),(0,i.kt)(s.Z,{value:"cli",label:"CLI",default:!0,mdxType:"TabItem"},(0,i.kt)("p",null,"You can upload and even update recipes using the cli as mentioned in the ",(0,i.kt)("a",{parentName:"p",href:"/docs/cli#ingest-deploy"},"cli documentation for uploading ingestion recipes"),".\nAn example execution for a given ",(0,i.kt)("inlineCode",{parentName:"p"},"recipe.yaml")," file, would look something like:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'datahub ingest deploy --name "My Test Ingestion Source" --schedule "5 * * * *" --time-zone "UTC" -c recipe.yaml\n')),(0,i.kt)("p",null,"This would create a new recipe with the name ",(0,i.kt)("inlineCode",{parentName:"p"},"My Test Ingestion Source"),". Note that to update an existing recipe, it's ",(0,i.kt)("inlineCode",{parentName:"p"},"urn")," id must be passed as a parameter.\nDataHub supports having multiple recipes with the same name so to distinguish them we use the urn for unique identification.")),(0,i.kt)(s.Z,{value:"graphql",label:"GraphQL",default:!0,mdxType:"TabItem"},(0,i.kt)("p",null,"Create ingestion sources using ",(0,i.kt)("a",{parentName:"p",href:"/docs/api/graphql/overview"},"DataHub's GraphQL API")," using the ",(0,i.kt)("strong",{parentName:"p"},"createIngestionSource")," mutation endpoint."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-graphql"},'mutation {\n   createIngestionSource(input: {\n      name: "My Test Ingestion Source",\n      type: "mysql",\n      description: "My ingestion source description",\n      schedule: {interval: "*/5 * * * *", timezone: "UTC"},\n      config: {\n         recipe: "{\\"source\\":{\\"type\\":\\"mysql\\",\\"config\\":{\\"include_tables\\":true,\\"database\\":null,\\"password\\":\\"${MYSQL_PASSWORD}\\",\\"profiling\\":{\\"enabled\\":false},\\"host_port\\":null,\\"include_views\\":true,\\"username\\":\\"${MYSQL_USERNAME}\\"}},\\"pipeline_name\\":\\"urn:li:dataHubIngestionSource:f38bd060-4ea8-459c-8f24-a773286a2927\\"}",\n         version: "0.8.18",\n         executorId: "mytestexecutor",\n      }\n   })\n}\n')),(0,i.kt)("p",null,"To update sources, please use the ",(0,i.kt)("inlineCode",{parentName:"p"},"updateIngestionSource")," endpoint. It is almost identical to the create endpoint, only requiring the urn of the source to be updated in addition to the same input as the create endpoint."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Note"),": Recipe must be double quotes escaped"))),(0,i.kt)("h3",{id:"running-an-ingestion-source"},"Running an Ingestion Source"),(0,i.kt)("p",null,"Once you've created your Ingestion Source, you can run it by clicking 'Execute'. Shortly after,\nyou should see the 'Last Status' column of the ingestion source change from ",(0,i.kt)("inlineCode",{parentName:"p"},"N/A")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"Running"),". This\nmeans that the request to execute ingestion has been successfully picked up by the DataHub ingestion executor."),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{width:"70%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/running-ingestion.png"})),(0,i.kt)("p",null,"If ingestion has executed successfully, you should see it's state shown in green as ",(0,i.kt)("inlineCode",{parentName:"p"},"Succeeded"),". "),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{width:"70%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/successful-ingestion.png"})),(0,i.kt)("h3",{id:"cancelling-an-ingestion-run"},"Cancelling an Ingestion Run"),(0,i.kt)("p",null,"If your ingestion run is hanging, there may a bug in the ingestion source, or another persistent issue like exponential timeouts. If these situations,\nyou can cancel ingestion by clicking ",(0,i.kt)("strong",{parentName:"p"},"Cancel")," on the problematic run."),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{width:"70%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/cancelled-ingestion.png"})),(0,i.kt)("p",null,"Once cancelled, you can view the output of the ingestion run by clicking ",(0,i.kt)("strong",{parentName:"p"},"Details"),". "),(0,i.kt)("h3",{id:"debugging-a-failed-ingestion-run"},"Debugging a Failed Ingestion Run"),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{width:"70%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/failed-ingestion.png"})),(0,i.kt)("p",null,"A variety of things can cause an ingestion run to fail. Common reasons for failure include:  "),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Recipe Misconfiguration"),": A recipe has not provided the required or expected configurations for the ingestion source. You can refer\nto the ",(0,i.kt)("a",{parentName:"li",href:"/docs/metadata-ingestion"},"Metadata Ingestion Framework")," source docs to learn more about the configurations required for your source type."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Failure to resolve Secrets"),": If DataHub is unable to find secrets that were referenced by your Recipe configuration, the ingestion run will fail.\nVerify that the names of the secrets referenced in your recipe match those which have been created. "),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Connectivity / Network Reachability"),": If DataHub is unable to reach a data source, for example due to DNS resolution\nfailures, metadata ingestion will fail. Ensure that the network where DataHub is deployed has access to the data source which\nyou are trying to reach. "),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Authentication"),": If you've enabled ",(0,i.kt)("a",{parentName:"li",href:"/docs/authentication/introducing-metadata-service-authentication"},"Metadata Service Authentication"),", you'll need to provide a Personal Access Token\nin your Recipe Configuration. To so this, set the 'token' field of the sink configuration to contain a Personal Access Token:")),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{width:"70%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/ingestion-with-token.png"})),(0,i.kt)("p",null,"The output of each run is captured and available to view in the UI for easier debugging. To view output logs, click ",(0,i.kt)("strong",{parentName:"p"},"DETAILS"),"\non the corresponding ingestion run. "),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{width:"70%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/ingestion-logs.png"})),(0,i.kt)("h2",{id:"faq"},"FAQ"),(0,i.kt)("h3",{id:"i-tried-to-ingest-metadata-after-running-datahub-docker-quickstart-but-ingestion-is-failing-with-failed-to-connect-errors-what-do-i-do"},"I tried to ingest metadata after running 'datahub docker quickstart', but ingestion is failing with 'Failed to Connect' errors. What do I do?"),(0,i.kt)("p",null,"If not due to one of the reasons outlined above, this may be because the executor running ingestion is unable\nto reach DataHub's backend using the default configurations. Try changing your ingestion recipe to make the ",(0,i.kt)("inlineCode",{parentName:"p"},"sink.config.server")," variable point to the Docker\nDNS name for the ",(0,i.kt)("inlineCode",{parentName:"p"},"datahub-gms")," pod: "),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{width:"70%",src:"https://raw.githubusercontent.com/datahub-project/static-assets/main/imgs/quickstart-ingestion-config.png"})),(0,i.kt)("h3",{id:"i-see-na-when-i-try-to-run-ingestion-what-do-i-do"},"I see 'N/A' when I try to run ingestion. What do I do?"),(0,i.kt)("p",null,"If you see 'N/A', and the ingestion run state never changes to 'Running', this may mean\nthat your executor (",(0,i.kt)("inlineCode",{parentName:"p"},"datahub-actions"),") container is down. "),(0,i.kt)("p",null,"This container is responsible for executing requests to run ingestion when they come in, either\non demand on a particular schedule. You can verify the health of the container using ",(0,i.kt)("inlineCode",{parentName:"p"},"docker ps"),". Moreover, you can inspect the container logs using by finding the container id\nfor the ",(0,i.kt)("inlineCode",{parentName:"p"},"datahub-actions")," container and running ",(0,i.kt)("inlineCode",{parentName:"p"},"docker logs <container-id>"),"."),(0,i.kt)("h3",{id:"when-should-i-not-use-ui-ingestion"},"When should I NOT use UI Ingestion?"),(0,i.kt)("p",null,"There are valid cases for ingesting metadata without the UI-based ingestion scheduler. For example,"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"You have written a custom ingestion Source"),(0,i.kt)("li",{parentName:"ul"},"Your data sources are not reachable on the network where DataHub is deployed. Managed DataHub users can use a ",(0,i.kt)("a",{parentName:"li",href:"/docs/managed-datahub/operator-guide/setting-up-remote-ingestion-executor-on-aws"},"remote executor")," for remote UI-based ingestion."),(0,i.kt)("li",{parentName:"ul"},"Your ingestion source requires context from a local filesystem (e.g. input files)"),(0,i.kt)("li",{parentName:"ul"},"You want to distribute metadata ingestion among multiple producers / environments")),(0,i.kt)("h3",{id:"how-do-i-attach-policies-to-the-actions-pod-to-give-it-permissions-to-pull-metadata-from-various-sources"},"How do I attach policies to the actions pod to give it permissions to pull metadata from various sources?"),(0,i.kt)("p",null,"This varies across the underlying platform. For AWS, please refer to this ",(0,i.kt)("a",{parentName:"p",href:"/docs/deploy/aws#iam-policies-for-ui-based-ingestion"},"guide"),"."),(0,i.kt)("h2",{id:"demo"},"Demo"),(0,i.kt)("p",null,"Click ",(0,i.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=EyMyLcaw_74"},"here")," to see a full demo of the UI Ingestion feature."),(0,i.kt)("h2",{id:"feedback--questions--concerns"},"Feedback / Questions / Concerns"),(0,i.kt)("p",null,"We want to hear from you! For any inquiries, including Feedback, Questions, or Concerns, reach out on ",(0,i.kt)("a",{parentName:"p",href:"https://datahubspace.slack.com/join/shared_invite/zt-nx7i0dj7-I3IJYC551vpnvvjIaNRRGw#/shared-invite/email"},"Slack"),"!"))}m.isMDXComponent=!0}}]);